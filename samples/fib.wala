func $fib (export "fib")
  param $n i64
  result i64
  nop ;; check for optimizations
  if (result i64) {(local.get $n) i64.le_u 2i64}
    1i64
    i64.add
      call $fib {(local.get $n) i64.sub 2i64}
      call $fib {(local.get $n) i64.sub 1i64}
